<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <script src="./we3.js"></script>
    <link rel="stylesheet" href="./style3.css">
</head>
<body>
    <div id="we-cont">
        <span id="test-area"></span>
        <button id="test-area-btn">get area</button>
    </div>
</body>
<script>
    document.addEventListener("DOMContentLoaded", () => {
        // --- fetching json --- //
        let params = (new URL(document.location)).searchParams;
        let jsonUrl = "./data/" + params.get("id") + ".json"; 
        fetch(jsonUrl)
        .then(res => res.json())
        .then(data => {
            let we = new WE("we-cont", data); 
            we.init(); 
        })
        // --- init --- //
        addEventListener("resize", (e) => {
            we.update(); 
        });
        //--- get area ---//
        document.getElementById("test-area-btn").addEventListener('click', () =>{
            let el = document.getElementById("test-area");
            let str = "";
            let area = we.getArea(); 
            el.innerHTML = "";
            area.w.forEach((value, i) => {
                el.innerHTML += "(<b>" + value + "</b> x <b>" + area.h[i] + "</b>)";
                i < (area.w.length - 1)
                    ? el.innerHTML += " + "
                    : el.innerHTML += " = "
            })
            el.innerHTML += "<b>" + area.area + "</b> cm&#178;"; 
        })
    });
</script>
</html>